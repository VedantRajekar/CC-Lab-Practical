%{
#include <stdio.h>
#include <string.h>

int lc = 0, sc = 0, tc = 0, ch = 0, wc = 0;
int kw = 0, id = 0, cmt = 0;
char *keywords[] = {"int", "float", "char", "if", "else", "for", "while", "return", "void", "main"};

int is_keyword(char *word) {
    for (int i = 0; i < 10; i++)
        if (strcmp(word, keywords[i]) == 0)
            return 1;
    return 0;
}
%}
%%
"//".*              { cmt++; lc++; ch += yyleng; }    
"/*"[^*]*"*/"       { cmt++; ch += yyleng; }          
\n                  { lc++; ch += yyleng; }          
" "                 { sc++; ch += yyleng; }          
"\t"                { tc++; ch += yyleng; }          
[a-zA-Z_][a-zA-Z0-9_]* {wc++; ch += yyleng;
                        if (is_keyword(yytext)) kw++;
                        else id++;}
.                   { ch += yyleng; }
%%
int yywrap() { return 1; }
int main() {
    printf("Enter code or text (Ctrl+D to finish):\n");
    yylex();
    printf("\n--- Analysis Result ---\n");
    printf("Lines       : %d\n", lc);
    printf("Spaces      : %d\n", sc);
    printf("Tabs        : %d\n", tc);
    printf("Characters  : %d\n", ch);
    printf("Words       : %d\n", wc);
    printf("Keywords    : %d\n", kw);
    printf("Identifiers : %d\n", id);
    printf("Comments    : %d\n", cmt);
    return 0;
}
